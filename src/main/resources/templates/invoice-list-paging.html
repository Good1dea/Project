<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Best parking</title>
    <link rel="shortcut icon" href="../img/parking/favicon.ico"/>
    <link rel="stylesheet" type="text/css" href="../css/style.css">
</head>
<body>
<div class="header" id="myHeader">
    <div class="column80" style="background-color:#aaa; margin: auto ;">
        <h2>The Best of the Best of parking place of Zaporizhzhya</h2>
        <h3 style="margin: auto;">History of orders</h3>
    </div>
    <div class="column20" style="text-align: center;background-color:#bbb;">
        <div class="wrapper">
            <div class="block">
                <form style="margin: 15px;" action="/home">
                    <button id="btnReservation" type="submit" style="margin-top: 1fr;">Home</button>
                </form>
                <div sec:authorize="!hasRole('ROLE_ADMIN')">
                    <form style="margin: 15px;" action="/user/update">
                        <button type="submit" style="margin-top: 1fr;">Update info</button>
                    </form>
                </div>
                <form style="margin: 15px;" action="/map">
                    <button type="submit" style="margin-top: 1fr;">Parking map</button>
                </form>
            </div>
            <div class="block_off">
                <form style="margin: 5px;" th:action="@{/logout}" method="post" title="Log out">
                    <button style="margin-top: 1fr;">
                        <img width="40" height="40" src="../img/power_off.png" alt="Log OUT">
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="content">

    <div>
        <th:block th:if="${message}">
            <div th:text="${message}" style="color: red"></div>
            <br>
        </th:block>
    </div>

    <div>
        <div class="row" th:fragment="pagination">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <nav aria-label="Pagination">
                    <ul class="pagination justify-content-center">
                        <li class="page-item" th:each="pageNumber : ${pageNumbers}" >
                            <a class="page-link" th:href="@{|/invoice-list-paging/${pageNumber}|}" th:text=${pageNumber}>1</a>
                        </li>
                    </ul>
                </nav>
            </div>
            <div class="col-md-2"></div>
        </div>

        <th th:if="${invoiceList != null}">
            <div class="row" th:fragment="invoice-list" th:if="${invoiceList != null && !invoiceList.isEmpty()}">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                    <table id="link-list" class="table table-striped table-bordered" style="width:100%">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Date</th>
                            <th>User Name</th>
                            <th>User Email</th>
                            <th>Reserved Place Number</th>
                            <th>Reserved Place Price</th>
                            <th>Car Number</th>
                            <th>Start Date</th>
                            <th>End Date</th>
                            <th>Total Price</th>
                        </tr>
                        </thead>
                        <tbody>

                        <tr th:each="invoice : ${invoiceList}" th:href="@{/invoice/{id}(id=${invoice.id})}">
                            <td th:text="${invoice.id}"></td>
                            <td th:text="${invoice.date}"></td>
                            <td th:text="${invoice.user.firstName} + ${invoice.user.lastName}"></td>
                            <td th:text="${invoice.user.email}"></td>
                            <td th:text="${invoice.reservedPlace.id}"></td>
                            <td th:text="${invoice.reservedPlace.pricePerDay}"></td>
                            <td th:text="${invoice.carNumber}"></td>
                            <td th:text="${invoice.startDate}"></td>
                            <td th:text="${invoice.endDate}"></td>
                            <td th:text="${invoice.totalPrice}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-md-2"></div>
            </div>

            <div class="row" th:fragment="pagination">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                    <nav aria-label="Pagination">
                        <ul class="pagination justify-content-center">
                            <li class="page-item" th:each="pageNumber : ${pageNumbers}" >
                                <a class="page-link" th:href="@{|/invoice-list-paging/${pageNumber}|}" th:text=${pageNumber}>1</a>
                            </li>
                        </ul>
                    </nav>
                </div>
                <div class="col-md-2"></div>
            </div>
        </th>
    </div>
</div>
<script src="../js/scripts.js"></script>
</body>
</html>